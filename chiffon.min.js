/*!
 * Chiffon v1.6.7 - A very small ECMAScript parser, tokenizer and minifier written in JavaScript.
 * Copyright (c) 2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("Chiffon",this,function(){"use strict";function a(a){return new RegExp("(?:(/[*][\\s\\S]*?[*]/)|(//[^"+z+"]*|<!--[^"+z+"]*)|(?:^|("+A+"))(?:"+B+"|)(-->[^"+z+"]*)|("+(a===q?B:F)+")"+C+'|("(?:\\\\\\r\\n|\\\\[\\s\\S]|[^"'+z+"\\\\])*\"|'(?:\\\\\\r\\n|\\\\[\\s\\S]|[^'"+z+"\\\\])*')|("+(a===t?B:E)+")"+C+"|(0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)|(?:\\d+(?:[.]\\d*)?|[.]\\d+)(?:[eE][+-]?\\d+)?|[1-9]\\d*|0[0-7]+)|("+D+")|("+B+")|("+A+")|("+(a===q?"[\\s\\S]":G)+"))","g")}function b(a){return 10===a||13===a||8232===a||8233===a}function c(a){return!Q.test(a)}function d(a){return!R.test(a)}function e(a){return l.call(arguments,1).forEach(function(b){for(var c=Object.keys(b),d=0,e=c.length;e>d;d++){var f=c[d];a[f]=b[f]}}),a}function f(a){this.ac=e({},a||{}),this.line=1,this.ap=0,this.ag=0}function g(a){this.ac=e({},a||{})}function h(a){this.ac=e({},a||{},_)}var i={},j=Array.prototype,k=(Object.prototype,j.push),l=j.slice,m=j.splice,n=(String.fromCharCode,"Comment"),o="WhiteSpace",p="LineTerminator",q="Template",r="String",s="Punctuator",t="RegularExpression",u="Numeric",v="Identifier",w="Null",x="Boolean",y="Keyword",z="\\r\\n\\u2028\\u2029",A="(?:\\r\\n|["+z+"])",B="(?:(?!["+z+"])\\s)+",C="(?=\\s*(?:(?!\\s*[/\\\\<>*+%`^\"'\\w$-])[^/\\\\<>*+%`^'\"({[\\w$-]|[!=]==?|[|][|]|&&|/[*/]|[,.;:!?)}\\]"+z+"]|$))",D="(?:>>>=?|[.]{3}|<<=|===|!==|>>=|[+][+](?=[+])|--(?=-)|[=!<>*%+/&|^-]=|&&|[|][|]|[+][+]|--|<<|>>|=>|[-+*/%<>=&|^~!?:;,.()[\\]{}])",E="(?:/(?![*/])(?:\\\\[\\s\\S]|\\[(?:\\\\[\\s\\S]|[^\\]"+z+"\\\\])*\\]|[^/"+z+"\\\\])+/(?:[gimuy]+\\b|))",F="`(?:\\\\[\\s\\S]|[$][{](?:\\\\[\\s\\S]|[^{}\\\\]|[{](?:[^{}]*(?:[{][^{}]*[}])?)*[}])*[}]|[^`\\\\])*`",G="(?:\\\\u(?:[0-9a-fA-F]{4}|[{][0-9a-fA-F]+[}])|[^\\s\\\\+/%*=&|^~<>!?:;,.()[\\]{}'\"`@#-])+",H="typeof|in|void|case|instanceof|yield|throw|delete|else|return|do",I="if|while|for|with",J=new RegExp("^(?:"+I+"|"+H+"|var|function|this|new|break|catch|finally|try|default|continue|switch|const|export|import|class|extends|debugger|super|let|static|enum|await|implements|package|protected|interface|private|public)$"),K=new RegExp(A),L=new RegExp("^"+G+"$"),M=new RegExp("^"+G),N=new RegExp(G+"$"),O=/^[+-]/,P=/[+-]$/,Q=/[^{}()[\]<>=!+*%\/&|^~?:;,.-]/,R=/[^0-9]/,S=new RegExp("^"+B),T=new RegExp("(?:(?:^(?:"+H+")$)|(?:(?![.\\]])"+D+"$))"),U=new RegExp("^(?:"+I+")$"),V=a(q),W=a(t),X=a();z=A=B=C=D=E=F=G=H=I=null,f.prototype={ad:function(a,b){for(var c,d,e,f,g,h,i,j,k,l,m,s=0;s<a.length;s++)if(d=a[s],e=d.length,0!==e){if(h=this.line,i=this.ap-this.ag,m=null,l=this.bb(d),l===r||l===n&&"*"===d.charAt(1))this.ac.loc&&(g=d.split(K),g.length>1&&(this.line+=g.length-1,this.ag=this.ap+e-g.pop().length));else if(l===p)this.line++,this.ag=this.ap+e;else if(l===t){if(this.ao(a,s,b,d)){s--;continue}f=d.lastIndexOf("/"),m={pattern:d.substr(1,f-1),flags:d.substring(f+1)}}else if(l===q){this.aj(d,b,i);continue}this.ap+=e,l&&(this.ac.parse&&l===p?k=!0:l===n&&!this.ac.comment||l===o&&!this.ac.aa||l===p&&!this.ac.lineTerminator||(c={type:l,value:d},k&&(c.hasLineTerminator=!0),k=!1,m&&(c.regex=m),this.ac.range&&(c.range=[this.ap-e,this.ap]),this.ac.loc&&(j=this.ap-this.ag,this.ah(c,h,i,this.line,j)),b[b.length]=c))}},bb:function(a){var e,f=a.length,g=a.charAt(0);switch(g){case'"':case"'":return r;case"/":return 1===f?s:(g=a.charAt(1),"/"===g||"*"===g?n:2===f&&"="===g?s:t);case".":return 1===f?s:(g=a.charAt(1),"."===g?s:u);case"<":return f>1&&"!"===a.charAt(1)?n:s;case"-":return 3>f?s:n;case"`":return q;case"}":return 1===f?s:q;default:if("true"===a||"false"===a)return x;if("null"===a)return w;if(e=g.charCodeAt(0),32===e||9===e||S.test(g))return o;if(b(e))return p;if(c(g))return s;if(d(g))return u;if(J.test(a))return y;if(L.test(a))return v}},ah:function(a,b,c,d,e){a.loc={start:{line:b,column:c},end:{line:d,column:e}}},aj:function(a,b,c){var d=this.ak(a,c),e=this.al(d);k.apply(b,e)},al:function(a){for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c];if("tmp-source"===f.type){var g=e({},f.af,{type:q}),h=this.ab(f.value,g);k.apply(b,h)}else b[b.length]=f}return b},ak:function(a,c){for(var d,e,f,g,h,i,j,k,l=a.match(V),m=this.line,n=m,o=this.ap,p=[this.ag],r=[],s=0,t="",u=q,v=0,w=0,x=0,y=l.length;y>x;g=l[x++]){var z=l[x],A=z.length;if(b(z.charCodeAt(0))&&(m++,p[p.length]=o+w+A),h){switch(z){case"{":v++;break;case"}":v--}0===v&&y>x+1&&"}"===l[x+1]&&(j=!0,u="tmp-source",h=!1)}else"\\"===z?"\\"===g?s++:s=1:"$"===z?i="\\"!==g||s%2===0:"{"===z&&i&&"$"===g&&(j=!0,u=q,h=!0);t+=z,x===y-1&&(j=!0,u=q),j&&(k={type:u,value:t},d=o+w+A,e=this.an(p,d),f=d-e,u===q?(this.ac.range&&(k.range=[d-t.length,d]),this.ac.loc&&this.ah(k,n,c,m,f),c=f+A):(d=o+w+A-t.length,e=this.an(p,d),k.af={line:n,ap:d,ag:e},c=f),r[r.length]=k,t="",n=m,j=!1),w+=A}return this.line=n,this.ap=d,this.ag=e,r},an:function(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d)return d}},ao:function(a,b,c,d){for(var e=c.length;--e>=0;){var f=c[e],g=f.type;if(g!==n&&g!==o&&g!==p){var h=f.value;if(g===s){if(")"===h){if(this.aq(c,e+1))break}else if(T.test(h))break}else if(g===y&&T.test(h)||g===q&&"${"===h.slice(-2))break;var i=d.match(W);return m.apply(a,[b,1].concat(i)),!0}}return!1},aq:function(a,b){for(var c,d,e,f=0;--b>=0;)if(c=a[b],c.type===s)if(d=c.value,"("===d){if(0===--f)return e=a[b-1],e&&e.type===y&&U.test(e.value)?!0:!1}else")"===d&&f++;return!1},ab:function(a,b){var c=new f(this.ac);return e(c,b),c.tokenize(a)},tokenize:function(a){if(null==a)return[];a=""+a;var b=[],c=a.match(X);return c&&this.ad(c,b),b}};var Y=i.tokenize=function(a,b){return new f(b).tokenize(a)};g.prototype={untokenize:function(a){for(var b,c=[],d=0,e=a.length;e>d;b=a[d++]){var f=a[d],g=f.type,h=f.value;if(b&&!this.ac.unsafe){var i,j=(b.type,b.value);i=g===s?O.test(h)&&P.test(j):M.test(h)&&N.test(j),c[c.length]=(i?" ":"")+h}else c[c.length]=h}return c.join("")}};var Z=i.untokenize=function(a,b){return new g(b).untokenize(a)},$={},_={maxLineLen:32e3};h.prototype={at:function(){this.ap=0,this.ar=0,this.au()},as:function(){return this.ap++,this.au()},au:function(){return this.length=this.ae.length,this.am=this.ae[this.ap-1]||{},this.ai=this.ae[this.ap]||$,this.value=this.ai.value,this.type=this.ai.type,this.av=this.ae[this.ap+1]||$,this.ai},aw:function(a){null==a&&(a=this.ap),this.ae.splice(a,1),this.au()},bc:function(a){this.ae.splice(this.ap+1,0,a),this.as()},ax:function(a){for(a=a||p;this.type===a;)this.aw()},ay:function(){for(this.at(),this.ax();this.ap<this.length;){if(this.type===p){if(this.am.type===s||this.am.type===p||this.av.type===s){this.ax();continue}if(this.av.type===p){this.as(),this.ax();continue}}this.as()}},az:function(){for(this.at();this.ap<this.length;)this.type===p?this.ar=0:(this.ar+=this.value.length,this.ar>=this.ac.maxLineLen&&(this.type!==s||P.test(this.value)||(this.bc({type:p,value:"\n"}),this.ar=0))),this.as()},ba:function(){this.ay(),this.az()},minify:function(a){return this.ae=Y(a,{lineTerminator:!0}),this.at(),this.ba(),Z(this.ae)}};i.minify=function(a,b){return new h(b).minify(a)};return i});