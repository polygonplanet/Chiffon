/*!
 * Chiffon v1.5.0 - A very small ECMAScript parser, tokenizer and minifier written in JavaScript.
 * Copyright (c) 2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("Chiffon",this,function(){"use strict";function a(a){return new RegExp("(?:(/[*][\\s\\S]*?[*]/)|(//[^"+D+"]*|<!--[^"+D+"]*)|(?:^|("+E+"))(?:"+F+"|)(-->[^"+D+"]*)|(`(?:\\\\[\\s\\S]|[^`\\\\])*`)"+G+'|("(?:\\\\[\\s\\S]|(?:[^"'+D+'\\\\]|[^"\\r\\\\][^"\\n\\\\]))*"|\'(?:\\\\[\\s\\S]|(?:[^\''+D+"\\\\]|[^'\\r\\\\][^'\\n\\\\]))*')|("+(a?I:F)+")"+G+"|(0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)|(?:\\d+(?:[.]\\d*)?|[.]\\d+)(?:[eE][+-]?\\d+)?|[1-9]\\d*|0[0-7]+)|("+H+")|(\\\\u[0-9a-fA-F]{4})|"+F+"|("+E+")|("+J+"+))","g")}function b(a){return 10===a||13===a||8232===a||8233===a}function c(a){for(var b=l.call(arguments,1),c=0,d=b.length;d>c;c++){var e=b[c];for(var f in e)n.call(e,f)&&(a[f]=e[f])}return a}function d(a){this.ab=c({},a||{})}function e(a){this.ab=c({},a||{})}function f(a,b){this.ab=c({},b||{},Z),this.aa=""+a}var g,h={},i=Array.prototype,j=Object.prototype,k=i.push,l=i.slice,m=i.splice,n=j.hasOwnProperty,o=String.fromCharCode,p="Comment",q="LineTerminator",r="Template",s="String",t="Punctuator",u="RegularExpression",v="Numeric",w="UnicodeEscapeSequence",x="Identifier",y="Null",z="Boolean",A="Keyword",B=["",p,p,q,p,r,s,u,v,t,w,q,x],C=B.length,D="\\r\\n\\u2028\\u2029",E="(?:\\r\\n|["+D+"])",F="(?:(?!["+D+"])\\s)+",G="(?=\\s*(?:(?!\\s*[/\\\\<>*+%`^\"'\\w$-])[^/\\\\<>*+%`^'\"({[\\w$-]|[!=]==?|[|][|]|&&|/[*/]|[,.;:!?)}\\]"+D+"]|$))",H="(?:>>>=?|[.]{3}|<<=|===|!==|>>=|[+][+](?=[+])|--(?=-)|[=!<>*%+/&|^-]=|&&|[|][|]|[+][+]|--|<<|>>|=>|[-+*/%<>=&|^~!?:;,.()[\\]{}])",I="(?:/(?![*])(?:\\\\.|[^/"+D+"\\\\])+/(?:[gimuy]{0,5}|\\b))",J="[^\\s+/%*=&|^~<>!?:;,.()[\\]{}'\"`-]",K="typeof|in|void|case|instanceof|yield|throw|delete",L="if|while|for|with",M=new RegExp("^(?:"+L+"|"+K+"|var|else|function|this|return|new|break|do|catch|finally|try|default|continue|switch|const|export|import|class|extends|debugger|super|let|static|enum|await|implements|package|protected|interface|private|public)$"),N=new RegExp(E),O=new RegExp("^"+J),P=new RegExp(J+"$"),Q=/^[+-]/,R=/[+-]$/,S=new RegExp("(?:(?:^(?:"+K+")$)|(?:(?![.\\]])"+H+"$))"),T=new RegExp("^(?:"+L+")$"),U=a(),V=a(!0);d.prototype={ac:function(a,b){var c,d=this.line;this.ae?c=this.af.ag.ah+U.lastIndex:(c=V.lastIndex,g&&(c+=this.ah));for(var e=1;C>e;e++){var f=a[e];if(f){var h,i,j=c-f.length-this.aj,k=B[e];if(k===p){if("*"===f.charAt(1)&&this.al(f,c),!this.ab.comment)break}else if(k===q){if(this.line++,this.aj=c,!this.ab.lineTerminator)continue}else if(k===s)this.al(f,c);else if(k===r)i=!0;else if(k===x)"null"===f?k=y:"true"===f||"false"===f?k=z:M.test(f)&&(k=A);else if(k===u){if(this.ae)break;i=!0,h=this.am(f)}var l={type:k,value:f};h&&(l.regex=h),i&&(l.ag={line:this.line,ai:j,ah:c-f.length,aj:this.aj}),k===r&&this.al(f,c);var m=c-this.aj;if(this.ao(l,c),this.ak(l,d,j,this.line,m),b[b.length]=l,f===a[0])break}}},ao:function(a,b){this.ab.range&&(a.range=[b-a.value.length,b])},ak:function(a,b,c,d,e){this.ab.loc&&(a.loc={start:{line:b,column:c},end:{line:d,column:e}})},al:function(a,b){if(this.ab.loc){var c=a.split(N);c.length>1&&(this.line+=c.length-1,this.aj=b-c.pop().length)}},ap:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.type===r){var d=this.aq(c),e=this.ar(d,c);m.apply(a,[b,1].concat(e)),b+=e.length}}},ar:function(a,b){for(var d=[],e=0,f=a.length;f>e;e++){var h=a[e];if("tmp-source"===h.type){g=c({},h.ag,{type:r});var i=W(h.value,this.ab);g=null,k.apply(d,i)}else d[d.length]=h}return d},aq:function(a){for(var c,d,e,f,g,h,i,j,k=a.value,l=a.ag,m=l.line,n=m,p=l.ai,q=l.ah,s=[l.aj],t=[],u=0,v="",w=r,x=0,y=k.length;y>x;f=k.charCodeAt(x++)){var z=k.charCodeAt(x);b(z)&&(13===f&&10===z&&m--,m++,s[s.length]=q+x+1),g?y>x+1&&125===k.charCodeAt(x+1)&&(i=!0,w="tmp-source",g=!1):92===z?92===f?u++:u=1:36===z?h=92!==f||u%2===0:123===z&&h&&36===f&&(i=!0,w=r,g=!0),v+=o(z),x===y-1&&(i=!0,w=r),i&&(j={type:w,value:v},c=q+x+1,d=this.at(s,c),e=c-d,w===r?(this.ao(j,c),this.ak(j,n,p,m,e),p=e+1):(c=q+x+1-v.length,d=this.at(s,c),j.ag={line:n,ah:c,aj:d},p=e),t[t.length]=j,v="",n=m,i=!1)}return t},at:function(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d)return d}},au:function(a){for(var b=0;b<a.length;b++)if(a[b].type===u){for(var c,d=b,e=a[b];--d>=0;){var f=a[d],g=f.type;if(g!==p&&g!==q){var h=f.value;if(g===t){if(")"===h){if(this.aw(a,d+1))break}else if(S.test(h))break}else if(g===A&&S.test(h)||g===r&&"${"===h.slice(-2))break;var i=this.ax(e);m.apply(a,[b,1].concat(i)),c=!0;break}}c||delete e.ag}},aw:function(a,b){for(var c=0;--b>=0;){var d=a[b],e=d.type;if(e===t){var f=d.value;if("("===f){if(0===--c){var g=a[b-1];return g&&g.type===A&&T.test(g.value)?!0:!1}}else")"===f&&c++}}return!1},am:function(a){var b=a.lastIndexOf("/"),c=a.substring(b+1),d=a.substr(1,b-1);return{pattern:d,flags:c}},ax:function(a){this.af=a;var b,c=a.value,d=[];for(this.ab.loc&&(this.line=a.loc.start.line,this.aj=a.ag.aj),this.ae=!0,U.lastIndex=0;null!=(b=U.exec(c));)this.ac(b,d);return this.ae=!1,this.af=null,d},tokenize:function(a){a=""+a,g?c(this,g):(this.line=1,this.aj=0),this.ae=!1;var b,d=[];for(V.lastIndex=0;null!=(b=V.exec(a));)this.ac(b,d);return g&&g.type===r||this.ap(d),this.au(d),d}};var W=h.tokenize=function(a,b){return new d(b).tokenize(a)};e.prototype={untokenize:function(a){for(var b,c=[],d=0,e=a.length;e>d;b=a[d++]){var f=a[d],g=f.type,h=f.value;if(b){var i,j=(b.type,b.value);switch(g){case t:i=Q.test(h)&&R.test(j);break;case x:case A:case v:case y:case z:case w:i=O.test(h)&&P.test(j)}c[c.length]=(i?" ":"")+h}else c[c.length]=h}return c.join("")}};var X=h.untokenize=function(a,b){return new e(b).untokenize(a)},Y={},Z={maxLineLen:32e3};f.prototype={ba:function(){this.length=this.ad.length,this.av=0,this.ay=0,this.bb()},az:function(){return this.av++,this.bb()},bb:function(){return this.as=this.ad[this.av-1]||{},this.an=this.ad[this.av]||Y,this.value=this.an.value,this.type=this.an.type,this.bc=this.ad[this.av+1]||Y,this.an},bd:function(a,b){b=b||1,null==a&&(a=this.av);do this.ad[a--].value="";while(--b>0)},be:function(a){for(a=a||q;this.type===a;)this.bd(),this.az()},bf:function(a){for(this.be();this.av<this.length;)this.type===q&&(this.bc.type===q?(this.az(),this.be()):(this.as.type===t||this.as.type===q||this.bc.type===t)&&this.be()),this.az();return this.bg(),a?void 0:this.bf(!0)},bg:function(){var a=[];for(this.ba();this.av<this.length;)this.value&&(a[a.length]=this.an),this.az();this.ad=a,this.ba()},bh:function(){this.as.type!==s||this.bc.type!==s||this.as.value.charAt(0)!==this.bc.value.charAt(0)&&this.as.value.slice(-1)!==this.bc.value.slice(-1)||(this.as.value=this.as.value.slice(0,-1),this.bc.value=this.bc.value.substring(1),this.bd())},bi:function(){for(;this.av<this.length;)this.type===q?this.ay=0:(this.ay+=this.value.length,this.ay>=this.ab.maxLineLen&&(this.type!==t||R.test(this.value)||(this.an.value+="\n",this.ay=0))),this.az()},bj:function(){for(this.bf();this.av<this.length;){switch(this.type){case t:";"===this.value&&"}"===this.bc.value?this.bd():"+"===this.value&&this.bh();
}this.az()}this.bg(),this.bi()},minify:function(){return this.ad=W(this.aa,{lineTerminator:!0}),this.ba(),this.bj(),this.aa=null,X(this.ad)}};h.minify=function(a,b){return new f(a,b).minify()};return h});