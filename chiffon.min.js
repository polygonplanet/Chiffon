/*!
 * Chiffon v1.6.2 - A very small ECMAScript parser, tokenizer and minifier written in JavaScript.
 * Copyright (c) 2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("Chiffon",this,function(){"use strict";function a(a){return new RegExp("(?:(/[*][\\s\\S]*?[*]/)|(//[^"+D+"]*|<!--[^"+D+"]*)|(?:^|("+E+"))(?:"+F+"|)(-->[^"+D+"]*)|(`(?:\\\\[\\s\\S]|[^`\\\\])*`)"+G+'|("(?:\\\\[\\s\\S]|(?:[^"'+D+'\\\\]|[^"\\r\\\\][^"\\n\\\\]))*"|\'(?:\\\\[\\s\\S]|(?:[^\''+D+"\\\\]|[^'\\r\\\\][^'\\n\\\\]))*')|("+(a?I:F)+")"+G+"|(0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)|(?:\\d+(?:[.]\\d*)?|[.]\\d+)(?:[eE][+-]?\\d+)?|[1-9]\\d*|0[0-7]+)|("+H+")|(\\\\u[0-9a-fA-F]{4})|"+F+"|("+E+")|("+J+"+))","g")}function b(a){return 10===a||13===a||8232===a||8233===a}function c(a){return!!~"{}()[]<>=!+-*%/&|^~?:;,.".indexOf(a)}function d(a){return!!~"0123456789".indexOf(a)}function e(a){for(var b=n.call(arguments,1),c=0,d=b.length;d>c;c++){var e=b[c];for(var f in e)p.call(e,f)&&(a[f]=e[f])}return a}function f(a){this.ab=e({},a||{})}function g(a){this.ab=e({},a||{})}function h(a,b){this.ab=e({},b||{},$),this.aa=""+a}var i,j={},k=Array.prototype,l=Object.prototype,m=k.push,n=k.slice,o=k.splice,p=l.hasOwnProperty,q=String.fromCharCode,r="Comment",s="LineTerminator",t="Template",u="String",v="Punctuator",w="RegularExpression",x="Numeric",y="UnicodeEscapeSequence",z="Identifier",A="Null",B="Boolean",C="Keyword",D="\\r\\n\\u2028\\u2029",E="(?:\\r\\n|["+D+"])",F="(?:(?!["+D+"])\\s)+",G="(?=\\s*(?:(?!\\s*[/\\\\<>*+%`^\"'\\w$-])[^/\\\\<>*+%`^'\"({[\\w$-]|[!=]==?|[|][|]|&&|/[*/]|[,.;:!?)}\\]"+D+"]|$))",H="(?:>>>=?|[.]{3}|<<=|===|!==|>>=|[+][+](?=[+])|--(?=-)|[=!<>*%+/&|^-]=|&&|[|][|]|[+][+]|--|<<|>>|=>|[-+*/%<>=&|^~!?:;,.()[\\]{}])",I="(?:/(?![*])(?:\\\\.|[^/"+D+"\\\\])+/(?:[gimuy]{0,5}|\\b))",J="[^\\s+/%*=&|^~<>!?:;,.()[\\]{}'\"`-]",K="typeof|in|void|case|instanceof|yield|throw|delete",L="if|while|for|with",M=new RegExp("^(?:"+L+"|"+K+"|var|else|function|this|return|new|break|do|catch|finally|try|default|continue|switch|const|export|import|class|extends|debugger|super|let|static|enum|await|implements|package|protected|interface|private|public)$"),N=new RegExp(E),O=new RegExp("^"+J),P=new RegExp(J+"$"),Q=/^[+-]/,R=/[+-]$/,S=new RegExp("^"+F),T=new RegExp("(?:(?:^(?:"+K+")$)|(?:(?![.\\]])"+H+"$))"),U=new RegExp("^(?:"+L+")$"),V=a(),W=a(!0);f.prototype={ac:function(a,b){for(var c,d,e,f,g,h,i,j,k,l,m=0;m<a.length;m++)if(d=a[m],e=d.length,0!==e){if(h=this.line,i=this.ao-this.af,l=null,k=this.bc(d),k===u||k===r&&"*"===d.charAt(1))this.ab.loc&&(g=d.split(N),g.length>1&&(this.line+=g.length-1,this.af=this.ao+e-g.pop().length));else if(k===s)this.line++,this.af=this.ao+e;else if(k===w){if(this.an(a,m,b,d)){m--;continue}f=d.lastIndexOf("/"),l={pattern:d.substr(1,f-1),flags:d.substring(f+1)}}else if(k===t){this.ai(d,b,i);continue}this.ao+=e,k===r&&!this.ab.comment||k===s&&!this.ab.lineTerminator||k&&(c={type:k,value:d},l&&(c.regex=l),this.ab.range&&(c.range=[this.ao-e,this.ao]),this.ab.loc&&(j=this.ao-this.af,this.ag(c,h,i,this.line,j)),b[b.length]=c)}},bc:function(a){var e,f=a.length,g=a.charAt(0);switch(g){case'"':case"'":return u;case"/":return 1===f?v:(g=a.charAt(1),"/"===g||"*"===g?r:2===f&&"="===g?v:w);case".":return 1===f?v:(g=a.charAt(1),"."===g?v:x);case"<":return f>1&&"!"===a.charAt(1)?r:v;case"-":return 3>f?v:r;case"`":return t;case"}":return 1===f?v:t;case"\\":if(f>1)return y;return;default:if("true"===a||"false"===a)return B;if("null"===a)return A;if(e=g.charCodeAt(0),32===e||9===e||S.test(g))return;return b(e)?s:c(g)?v:d(g)?x:M.test(a)?C:z}},ag:function(a,b,c,d,e){a.loc={start:{line:b,column:c},end:{line:d,column:e}}},ai:function(a,b,c){var d=this.aj(a,c),e=this.ak(d);m.apply(b,e)},ak:function(a){for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c];if("tmp-source"===f.type){i=e({},f.ae,{type:t});var g=X(f.value,this.ab);i=null,m.apply(b,g)}else b[b.length]=f}return b},aj:function(a,c){for(var d,e,f,g,h,i,j,k,l=this.line,m=l,n=this.ao,o=[this.af],p=[],r=0,s="",u=t,v=0,w=0,x=0,y=0,z=a.length;z>y;g=a.charCodeAt(y++)){var A=a.charCodeAt(y);if(b(A)&&(13===g&&10===A&&l--,l++,o[o.length]=n+y+1),h){switch(A){case 123:w++;break;case 125:w--;break;case 40:x++;break;case 41:x--;break;case 91:v++;break;case 93:v--}0===v&&0===w&&0===x&&z>y+1&&125===a.charCodeAt(y+1)&&(j=!0,u="tmp-source",h=!1)}else 92===A?92===g?r++:r=1:36===A?i=92!==g||r%2===0:123===A&&i&&36===g&&(j=!0,u=t,h=!0);s+=q(A),y===z-1&&(j=!0,u=t),j&&(k={type:u,value:s},d=n+y+1,e=this.am(o,d),f=d-e,u===t?(this.ab.range&&(k.range=[d-s.length,d]),this.ab.loc&&this.ag(k,m,c,l,f),c=f+1):(d=n+y+1-s.length,e=this.am(o,d),k.ae={line:m,ao:d,af:e},c=f),p[p.length]=k,s="",m=l,j=!1)}return this.line=m,this.ao=d,this.af=e,p},am:function(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d)return d}},an:function(a,b,c,d){for(var e=c.length;--e>=0;){var f=c[e],g=f.type;if(g!==r&&g!==s){var h=f.value;if(g===v){if(")"===h){if(this.ap(c,e+1))break}else if(T.test(h))break}else if(g===C&&T.test(h)||g===t&&"${"===h.slice(-2))break;var i=d.match(V);return o.apply(a,[b,1].concat(i)),!0}}return!1},ap:function(a,b){for(var c,d,e,f=0;--b>=0;)if(c=a[b],c.type===v)if(d=c.value,"("===d){if(0===--f)return e=a[b-1],e&&e.type===C&&U.test(e.value)?!0:!1}else")"===d&&f++;return!1},tokenize:function(a){a=""+a,i?e(this,i):(this.line=1,this.ao=0,this.af=0);var b=[],c=a.match(W);return c&&this.ac(c,b),b}};var X=j.tokenize=function(a,b){return new f(b).tokenize(a)};g.prototype={untokenize:function(a){for(var b,c=[],d=0,e=a.length;e>d;b=a[d++]){var f=a[d],g=f.type,h=f.value;if(b){var i,j=(b.type,b.value);i=g===v?Q.test(h)&&R.test(j):O.test(h)&&P.test(j),c[c.length]=(i?" ":"")+h}else c[c.length]=h}return c.join("")}};var Y=j.untokenize=function(a,b){return new g(b).untokenize(a)},Z={},$={maxLineLen:32e3};h.prototype={as:function(){this.length=this.ad.length,this.ao=0,this.aq=0,this.at()},ar:function(){return this.ao++,this.at()},at:function(){return this.al=this.ad[this.ao-1]||{},this.ah=this.ad[this.ao]||Z,this.value=this.ah.value,this.type=this.ah.type,this.au=this.ad[this.ao+1]||Z,this.ah},av:function(a,b){b=b||1,null==a&&(a=this.ao);do this.ad[a--].value="";while(--b>0)},aw:function(a){for(a=a||s;this.type===a;)this.av(),this.ar()},ax:function(a){for(this.aw();this.ao<this.length;)this.type===s&&(this.au.type===s?(this.ar(),this.aw()):(this.al.type===v||this.al.type===s||this.au.type===v)&&this.aw()),this.ar();return this.ay(),a?void 0:this.ax(!0)},ay:function(){var a=[];for(this.as();this.ao<this.length;)this.value&&(a[a.length]=this.ah),this.ar();this.ad=a,this.as()},az:function(){this.al.type!==u||this.au.type!==u||this.al.value.charAt(0)!==this.au.value.charAt(0)&&this.al.value.slice(-1)!==this.au.value.slice(-1)||(this.al.value=this.al.value.slice(0,-1),this.au.value=this.au.value.substring(1),this.av())},ba:function(){for(;this.ao<this.length;)this.type===s?this.aq=0:(this.aq+=this.value.length,this.aq>=this.ab.maxLineLen&&(this.type!==v||R.test(this.value)||(this.ah.value+="\n",this.aq=0))),this.ar()},bb:function(){for(this.ax();this.ao<this.length;){switch(this.type){case v:";"===this.value&&"}"===this.au.value?this.av():"+"===this.value&&this.az()}this.ar()}this.ay(),this.ba()},minify:function(){return this.ad=X(this.aa,{lineTerminator:!0}),
this.as(),this.bb(),this.aa=null,Y(this.ad)}};j.minify=function(a,b){return new h(a,b).minify()};return j});