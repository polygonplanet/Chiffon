/*!
 * Chiffon v1.5.0 - A very small ECMAScript parser, tokenizer and minifier written in JavaScript.
 * Copyright (c) 2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("Chiffon",this,function(){"use strict";function a(a){return new RegExp("(?:(/[*][\\s\\S]*?[*]/)|(//[^"+D+"]*|<!--[^"+D+"]*)|(?:^|("+E+"))(?:"+F+"|)(-->[^"+D+"]*)|(`(?:\\\\[\\s\\S]|[^`\\\\])*`)"+G+'|("(?:\\\\[\\s\\S]|(?:[^"'+D+'\\\\]|[^"\\r\\\\][^"\\n\\\\]))*"|\'(?:\\\\[\\s\\S]|(?:[^\''+D+"\\\\]|[^'\\r\\\\][^'\\n\\\\]))*')|("+(a?I:F)+")"+G+"|(0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)|(?:\\d+(?:[.]\\d*)?|[.]\\d+)(?:[eE][+-]?\\d+)?|[1-9]\\d*|0[0-7]+)|("+H+")|(\\\\u[0-9a-fA-F]{4})|"+F+"|("+E+")|("+J+"+))","g")}function b(a){return 10===a||13===a||8232===a||8233===a}function c(a){for(var b=l.call(arguments,1),c=0,d=b.length;d>c;c++){var e=b[c];for(var f in e)n.call(e,f)&&(a[f]=e[f])}return a}function d(a){this.options=c({},a||{})}function e(a,b){b=c({},b||{});for(var d,e=[],f=b.maxLineLen||X,g=0,h=0,i=a.length;i>h;d=a[h++]){var j=a[h],k=j.type,l=j.value,m=a[h+1];if(d){var n="",o=d.type,p=d.value;if(k===q){if(o===q)continue;o===t||m&&m.type===t?l="":g=0}else(Q.test(l)&&R.test(p)||O.test(l)&&P.test(p))&&(n=" "),k===t&&g>f&&(l+="\n",g=0);var r=n+l;g+=r.length,e[e.length]=r}else k!==q&&(e[e.length]=l)}return e.join("")}function f(a,b){return e(W(a,{lineTerminator:!0}),b)}var g,h={},i=Array.prototype,j=Object.prototype,k=i.push,l=i.slice,m=i.splice,n=j.hasOwnProperty,o=String.fromCharCode,p="Comment",q="LineTerminator",r="Template",s="String",t="Punctuator",u="RegularExpression",v="Numeric",w="UnicodeEscapeSequence",x="Identifier",y="Null",z="Boolean",A="Keyword",B=["",p,p,q,p,r,s,u,v,t,w,q,x],C=B.length,D="\\r\\n\\u2028\\u2029",E="(?:\\r\\n|["+D+"])",F="(?:(?!["+D+"])\\s)+",G="(?=\\s*(?:(?!\\s*[/\\\\<>*+%`^\"'\\w$-])[^/\\\\<>*+%`^'\"({[\\w$-]|[!=]==?|[|][|]|&&|/[*/]|[,.;:!?)}\\]"+D+"]|$))",H="(?:>>>=?|[.]{3}|<<=|===|!==|>>=|[+][+](?=[+])|--(?=-)|[=!<>*%+/&|^-]=|&&|[|][|]|[+][+]|--|<<|>>|=>|[-+*/%<>=&|^~!?:;,.()[\\]{}])",I="(?:/(?![*])(?:\\\\.|[^/"+D+"\\\\])+/(?:[gimuy]{0,5}|\\b))",J="[^\\s+/%*=&|^~<>!?:;,.()[\\]{}'\"`-]",K="typeof|in|void|case|instanceof|yield|throw|delete",L="if|while|for|with",M=new RegExp("^(?:"+L+"|"+K+"|var|else|function|this|return|new|break|do|catch|finally|try|default|continue|switch|const|export|import|class|extends|debugger|super|let|static|enum|await|implements|package|protected|interface|private|public)$"),N=new RegExp(E),O=new RegExp("^"+J),P=new RegExp(J+"$"),Q=/^[+-]/,R=/[+-]$/,S=new RegExp("(?:(?:^(?:"+K+")$)|(?:(?![.\\]])"+H+"$))"),T=new RegExp("^(?:"+L+")$"),U=a(),V=a(!0);d.prototype={parseMatches:function(a,b){var c,d=this.line;this.regexParsing?c=this._currentRegexToken._loc.rangeStart+U.lastIndex:(c=V.lastIndex,g&&(c+=this.rangeStart));for(var e=1;C>e;e++){var f=a[e];if(f){var h,i,j=c-f.length-this.prevLineIndex,k=B[e];if(k===p){if("*"===f.charAt(1)&&this.updateLine(f,c),!this.options.comment)break}else if(k===q){if(this.line++,this.prevLineIndex=c,!this.options.lineTerminator)continue}else if(k===s)this.updateLine(f,c);else if(k===r)i=!0;else if(k===x)"null"===f?k=y:"true"===f||"false"===f?k=z:M.test(f)&&(k=A);else if(k===u){if(this.regexParsing)break;i=!0,h=this.parseRegExpFlags(f)}var l={type:k,value:f};h&&(l.regex=h),i&&(l._loc={line:this.line,columnStart:j,rangeStart:c-f.length,prevLineIndex:this.prevLineIndex}),k===r&&this.updateLine(f,c);var m=c-this.prevLineIndex;if(this.addRange(l,c),this.addLoc(l,d,j,this.line,m),b[b.length]=l,f===a[0])break}}},addRange:function(a,b){this.options.range&&(a.range=[b-a.value.length,b])},addLoc:function(a,b,c,d,e){this.options.loc&&(a.loc={start:{line:b,column:c},end:{line:d,column:e}})},updateLine:function(a,b){if(this.options.loc){var c=a.split(N);c.length>1&&(this.line+=c.length-1,this.prevLineIndex=b-c.pop().length)}},parseTemplate:function(a){for(var b=0;b<a.length;b++){var c=a[b];if(c.type===r){var d=this.parseTemplateBlock(c),e=this.parseTemplateExpr(d,c);m.apply(a,[b,1].concat(e)),b+=e.length}}},parseTemplateExpr:function(a,b){for(var d=[],e=0,f=a.length;f>e;e++){var h=a[e];if("tmp-source"===h.type){g=c({},h._loc,{type:r});var i=W(h.value,this.options);g=null,k.apply(d,i)}else d[d.length]=h}return d},parseTemplateBlock:function(a){for(var c,d,e,f,g,h,i,j,k=a.value,l=a._loc,m=l.line,n=m,p=l.columnStart,q=l.rangeStart,s=[l.prevLineIndex],t=[],u=0,v="",w=r,x=0,y=k.length;y>x;f=k.charCodeAt(x++)){var z=k.charCodeAt(x);b(z)&&(13===f&&10===z&&m--,m++,s[s.length]=q+x+1),g?y>x+1&&125===k.charCodeAt(x+1)&&(i=!0,w="tmp-source",g=!1):92===z?92===f?u++:u=1:36===z?h=92!==f||u%2===0:123===z&&h&&36===f&&(i=!0,w=r,g=!0),v+=o(z),x===y-1&&(i=!0,w=r),i&&(j={type:w,value:v},c=q+x+1,d=this.findPrevLineIndex(s,c),e=c-d,w===r?(this.addRange(j,c),this.addLoc(j,n,p,m,e),p=e+1):(c=q+x+1-v.length,d=this.findPrevLineIndex(s,c),j._loc={line:n,rangeStart:c,prevLineIndex:d},p=e),t[t.length]=j,v="",n=m,i=!1)}return t},findPrevLineIndex:function(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d)return d}},fixRegExpTokens:function(a){for(var b=0;b<a.length;b++)if(a[b].type===u){for(var c,d=b,e=a[b];--d>=0;){var f=a[d],g=f.type;if(g!==p&&g!==q){var h=f.value;if(g===t){if(")"===h){if(this.isValidRegExpPrefix(a,d+1))break}else if(S.test(h))break}else if(g===A&&S.test(h)||g===r&&"${"===h.slice(-2))break;var i=this.parseRegExp(e);m.apply(a,[b,1].concat(i)),c=!0;break}}c||delete e._loc}},isValidRegExpPrefix:function(a,b){for(var c=0;--b>=0;){var d=a[b],e=d.type;if(e===t){var f=d.value;if("("===f){if(0===--c){var g=a[b-1];return g&&g.type===A&&T.test(g.value)?!0:!1}}else")"===f&&c++}}return!1},parseRegExpFlags:function(a){var b=a.lastIndexOf("/"),c=a.substring(b+1),d=a.substr(1,b-1);return{pattern:d,flags:c}},parseRegExp:function(a){this._currentRegexToken=a;var b,c=a.value,d=[];for(this.options.loc&&(this.line=a.loc.start.line,this.prevLineIndex=a._loc.prevLineIndex),this.regexParsing=!0,U.lastIndex=0;null!=(b=U.exec(c));)this.parseMatches(b,d);return this.regexParsing=!1,this._currentRegexToken=null,d},tokenize:function(a){a=""+a,g?c(this,g):(this.line=1,this.prevLineIndex=0),this.regexParsing=!1;var b,d=[];for(V.lastIndex=0;null!=(b=V.exec(a));)this.parseMatches(b,d);return g&&g.type===r||this.parseTemplate(d),this.fixRegExpTokens(d),d}};var W=h.tokenize=function(a,b){return new d(b).tokenize(a)},X=32e3;return h.untokenize=e,h.minify=f,h});