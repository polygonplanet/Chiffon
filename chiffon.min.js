/*!
 * Chiffon v1.6.4 - A very small ECMAScript parser, tokenizer and minifier written in JavaScript.
 * Copyright (c) 2015 polygon planet <polygon.planet.aqua@gmail.com>
 * @license MIT
 */
!function(a,b,c){"undefined"!=typeof exports?"undefined"!=typeof module&&module.exports?module.exports=c():exports[a]=c():"function"==typeof define&&define.amd?define(c):b[a]=c()}("Chiffon",this,function(){"use strict";function a(a){return new RegExp("(?:(/[*][\\s\\S]*?[*]/)|(//[^"+C+"]*|<!--[^"+C+"]*)|(?:^|("+D+"))(?:"+E+"|)(-->[^"+C+"]*)|("+I+")"+F+'|("(?:\\\\[\\s\\S]|(?:[^"'+C+'\\\\]|[^"\\r\\\\][^"\\n\\\\]))*"|\'(?:\\\\[\\s\\S]|(?:[^\''+C+"\\\\]|[^'\\r\\\\][^'\\n\\\\]))*')|("+(a?H:E)+")"+F+"|(0(?:[xX][0-9a-fA-F]+|[oO][0-7]+|[bB][01]+)|(?:\\d+(?:[.]\\d*)?|[.]\\d+)(?:[eE][+-]?\\d+)?|[1-9]\\d*|0[0-7]+)|("+G+")|(\\\\u[0-9a-fA-F]{4})|"+E+"|("+D+")|("+J+"+))","g")}function b(a){return 10===a||13===a||8232===a||8233===a}function c(a){return!!~"{}()[]<>=!+-*%/&|^~?:;,.".indexOf(a)}function d(a){return!!~"0123456789".indexOf(a)}function e(a){for(var b=m.call(arguments,1),c=0,d=b.length;d>c;c++){var e=b[c];for(var f in e)o.call(e,f)&&(a[f]=e[f])}return a}function f(a){this.ab=e({},a||{})}function g(a){this.ab=e({},a||{})}function h(a,b){this.ab=e({},b||{},_),this.aa=""+a}var i={},j=Array.prototype,k=Object.prototype,l=j.push,m=j.slice,n=j.splice,o=k.hasOwnProperty,p=String.fromCharCode,q="Comment",r="LineTerminator",s="Template",t="String",u="Punctuator",v="RegularExpression",w="Numeric",x="UnicodeEscapeSequence",y="Identifier",z="Null",A="Boolean",B="Keyword",C="\\r\\n\\u2028\\u2029",D="(?:\\r\\n|["+C+"])",E="(?:(?!["+C+"])\\s)+",F="(?=\\s*(?:(?!\\s*[/\\\\<>*+%`^\"'\\w$-])[^/\\\\<>*+%`^'\"({[\\w$-]|[!=]==?|[|][|]|&&|/[*/]|[,.;:!?)}\\]"+C+"]|$))",G="(?:>>>=?|[.]{3}|<<=|===|!==|>>=|[+][+](?=[+])|--(?=-)|[=!<>*%+/&|^-]=|&&|[|][|]|[+][+]|--|<<|>>|=>|[-+*/%<>=&|^~!?:;,.()[\\]{}])",H="(?:/(?![*/])(?:\\\\[\\s\\S]|\\[(?:\\\\[\\s\\S]|[^\\]"+C+"\\\\])*\\]|[^/"+C+"\\\\])+/(?:[gimuy]+\\b|))",I="`(?:\\\\[\\s\\S]|[$][{](?:\\\\[\\s\\S]|[^{}\\\\]|[{](?:[^{}]*(?:[{][^{}]*[}])?)*[}])*[}]|[^`\\\\])*`",J="[^\\s+/%*=&|^~<>!?:;,.()[\\]{}'\"`-]",K="typeof|in|void|case|instanceof|yield|throw|delete",L="if|while|for|with",M=new RegExp("^(?:"+L+"|"+K+"|var|else|function|this|return|new|break|do|catch|finally|try|default|continue|switch|const|export|import|class|extends|debugger|super|let|static|enum|await|implements|package|protected|interface|private|public)$"),N=new RegExp(D),O=new RegExp("^"+J),P=new RegExp(J+"$"),Q=/^[+-]/,R=/[+-]$/,S=new RegExp("^"+E),T=new RegExp("(?:(?:^(?:"+K+")$)|(?:(?![.\\]])"+G+"$))"),U=new RegExp("^(?:"+L+")$"),V=a(),W=a(!0);C=D=E=F=G=H=I=J=K=L=null;var X;f.prototype={ac:function(a,b){for(var c,d,e,f,g,h,i,j,k,l,m=0;m<a.length;m++)if(d=a[m],e=d.length,0!==e){if(h=this.line,i=this.ao-this.af,l=null,k=this.bc(d),k===t||k===q&&"*"===d.charAt(1))this.ab.loc&&(g=d.split(N),g.length>1&&(this.line+=g.length-1,this.af=this.ao+e-g.pop().length));else if(k===r)this.line++,this.af=this.ao+e;else if(k===v){if(this.an(a,m,b,d)){m--;continue}f=d.lastIndexOf("/"),l={pattern:d.substr(1,f-1),flags:d.substring(f+1)}}else if(k===s){this.ai(d,b,i);continue}this.ao+=e,k===q&&!this.ab.comment||k===r&&!this.ab.lineTerminator||k&&(c={type:k,value:d},l&&(c.regex=l),this.ab.range&&(c.range=[this.ao-e,this.ao]),this.ab.loc&&(j=this.ao-this.af,this.ag(c,h,i,this.line,j)),b[b.length]=c)}},bc:function(a){var e,f=a.length,g=a.charAt(0);switch(g){case'"':case"'":return t;case"/":return 1===f?u:(g=a.charAt(1),"/"===g||"*"===g?q:2===f&&"="===g?u:v);case".":return 1===f?u:(g=a.charAt(1),"."===g?u:w);case"<":return f>1&&"!"===a.charAt(1)?q:u;case"-":return 3>f?u:q;case"`":return s;case"}":return 1===f?u:s;case"\\":if(f>1)return x;return;default:if("true"===a||"false"===a)return A;if("null"===a)return z;if(e=g.charCodeAt(0),32===e||9===e||S.test(g))return;return b(e)?r:c(g)?u:d(g)?w:M.test(a)?B:y}},ag:function(a,b,c,d,e){a.loc={start:{line:b,column:c},end:{line:d,column:e}}},ai:function(a,b,c){var d=this.aj(a,c),e=this.ak(d);l.apply(b,e)},ak:function(a){for(var b=[],c=0,d=a.length;d>c;c++){var f=a[c];if("tmp-source"===f.type){X=e({},f.ae,{type:s});var g=Y(f.value,this.ab);X=null,l.apply(b,g)}else b[b.length]=f}return b},aj:function(a,c){for(var d,e,f,g,h,i,j,k,l=this.line,m=l,n=this.ao,o=[this.af],q=[],r=0,t="",u=s,v=0,w=0,x=0,y=0,z=a.length;z>y;g=a.charCodeAt(y++)){var A=a.charCodeAt(y);if(b(A)&&(13===g&&10===A&&l--,l++,o[o.length]=n+y+1),h){switch(A){case 123:w++;break;case 125:w--;break;case 40:x++;break;case 41:x--;break;case 91:v++;break;case 93:v--}0===v&&0===w&&0===x&&z>y+1&&125===a.charCodeAt(y+1)&&(j=!0,u="tmp-source",h=!1)}else 92===A?92===g?r++:r=1:36===A?i=92!==g||r%2===0:123===A&&i&&36===g&&(j=!0,u=s,h=!0);t+=p(A),y===z-1&&(j=!0,u=s),j&&(k={type:u,value:t},d=n+y+1,e=this.am(o,d),f=d-e,u===s?(this.ab.range&&(k.range=[d-t.length,d]),this.ab.loc&&this.ag(k,m,c,l,f),c=f+1):(d=n+y+1-t.length,e=this.am(o,d),k.ae={line:m,ao:d,af:e},c=f),q[q.length]=k,t="",m=l,j=!1)}return this.line=m,this.ao=d,this.af=e,q},am:function(a,b){for(var c=a.length-1;c>=0;--c){var d=a[c];if(b>=d)return d}},an:function(a,b,c,d){for(var e=c.length;--e>=0;){var f=c[e],g=f.type;if(g!==q&&g!==r){var h=f.value;if(g===u){if(")"===h){if(this.ap(c,e+1))break}else if(T.test(h))break}else if(g===B&&T.test(h)||g===s&&"${"===h.slice(-2))break;var i=d.match(V);return n.apply(a,[b,1].concat(i)),!0}}return!1},ap:function(a,b){for(var c,d,e,f=0;--b>=0;)if(c=a[b],c.type===u)if(d=c.value,"("===d){if(0===--f)return e=a[b-1],e&&e.type===B&&U.test(e.value)?!0:!1}else")"===d&&f++;return!1},tokenize:function(a){a=""+a,X?e(this,X):(this.line=1,this.ao=0,this.af=0);var b=[],c=a.match(W);return c&&this.ac(c,b),b}};var Y=i.tokenize=function(a,b){return new f(b).tokenize(a)};g.prototype={untokenize:function(a){for(var b,c=[],d=0,e=a.length;e>d;b=a[d++]){var f=a[d],g=f.type,h=f.value;if(b){var i,j=(b.type,b.value);i=g===u?Q.test(h)&&R.test(j):O.test(h)&&P.test(j),c[c.length]=(i?" ":"")+h}else c[c.length]=h}return c.join("")}};var Z=i.untokenize=function(a,b){return new g(b).untokenize(a)},$={},_={maxLineLen:32e3};h.prototype={as:function(){this.length=this.ad.length,this.ao=0,this.aq=0,this.at()},ar:function(){return this.ao++,this.at()},at:function(){return this.al=this.ad[this.ao-1]||{},this.ah=this.ad[this.ao]||$,this.value=this.ah.value,this.type=this.ah.type,this.au=this.ad[this.ao+1]||$,this.ah},av:function(a,b){b=b||1,null==a&&(a=this.ao);do this.ad[a--].value="";while(--b>0)},aw:function(a){for(a=a||r;this.type===a;)this.av(),this.ar()},ax:function(a){for(this.aw();this.ao<this.length;)this.type===r&&(this.au.type===r?(this.ar(),this.aw()):(this.al.type===u||this.al.type===r||this.au.type===u)&&this.aw()),this.ar();return this.ay(),a?void 0:this.ax(!0)},ay:function(){var a=[];for(this.as();this.ao<this.length;)this.value&&(a[a.length]=this.ah),this.ar();this.ad=a,this.as()},az:function(){this.al.type!==t||this.au.type!==t||this.al.value.charAt(0)!==this.au.value.charAt(0)&&this.al.value.slice(-1)!==this.au.value.slice(-1)||(this.al.value=this.al.value.slice(0,-1),this.au.value=this.au.value.substring(1),this.av())},ba:function(){for(;this.ao<this.length;)this.type===r?this.aq=0:(this.aq+=this.value.length,this.aq>=this.ab.maxLineLen&&(this.type!==u||R.test(this.value)||(this.ah.value+="\n",this.aq=0))),this.ar()},bb:function(){for(this.ax();this.ao<this.length;){switch(this.type){case u:";"===this.value&&"}"===this.au.value?this.av():"+"===this.value&&this.az();
}this.ar()}this.ay(),this.ba()},minify:function(){return this.ad=Y(this.aa,{lineTerminator:!0}),this.as(),this.bb(),this.aa=null,Z(this.ad)}};i.minify=function(a,b){return new h(a,b).minify()};return i});